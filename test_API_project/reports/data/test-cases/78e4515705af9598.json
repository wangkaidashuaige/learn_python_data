{"uid":"78e4515705af9598","name":"test_login_成功登录02","fullName":"DSMP.test_login.Test_Case_login#test_login_成功登录02","historyId":"ba9316f6f6403b92221982d34b117705","time":{"start":1673862390336,"stop":1673862390571,"duration":235},"status":"failed","statusMessage":"AssertionError: assert 'user' in {'data': None, 'message': '验证码不能为空', 'status': 400, 'timestamp': '2023-01-16 17:46:30'}\n +  where {'data': None, 'message': '验证码不能为空', 'status': 400, 'timestamp': '2023-01-16 17:46:30'} = <bound method Response.json of <Response [400]>>()\n +    where <bound method Response.json of <Response [400]>> = <Response [400]>.json","statusTrace":"self = <test_login.Test_Case_login object at 0x000001E0359D3290>\n\n    def test_login_成功登录02(self):\n        # 首页通过正则，获取uuid,img\n        code = requests.get('http://101.227.34.238:31943/dsp/system/auth/code')\n        res = code.content.decode()\n        print('返回结果：',res)\n        uuid = re.findall(r'\"uuid\":\"(.*?)\"', res, re.S)[0]\n        img = re.findall(r'\"img\":\"data:image\\/png;base64,(.*?)\"', res, re.S)\n        print(\"返回Uuid：\",uuid)\n        print(\"返回img：\",img)\n        # 通过base64把img中base64数据转换成图片，重复写入文件中。\n        bt = base64.b64decode(img[0])\n        png = open(\"dsmp_code1.png\", \"wb+\")\n        png.write(bt)\n        png.close()\n    \n        url = 'http://101.227.34.238:31943/dsp/system/auth/user/login'\n        headers = {\"Content-Type\": \"application/json\"}\n        # 调用第三方接口计算验证码\n        r = TestFunc()\n        data = json.dumps({\n            \"username\": \"ceshi1\",\n            \"password\": \"FuwBfYee2Z2MRqWshKrF9hi+lcrrXlnR0PLMhsymKkMPhCY100sZjrmcBr+Pe3ZQNd0TYY5aiwtPzFPhFKBaUA==\",\n            \"code\": r,\n            \"uuid\": uuid,\n            \"loginType\": \"generalUser\"\n        })\n        rep = requests.request('post',url=url, data=data, headers=headers)\n        print(rep.json())\n        ass = 'user'\n>       assert ass in rep.json()\nE       AssertionError: assert 'user' in {'data': None, 'message': '验证码不能为空', 'status': 400, 'timestamp': '2023-01-16 17:46:30'}\nE        +  where {'data': None, 'message': '验证码不能为空', 'status': 400, 'timestamp': '2023-01-16 17:46:30'} = <bound method Response.json of <Response [400]>>()\nE        +    where <bound method Response.json of <Response [400]>> = <Response [400]>.json\n\nDSMP\\test_login.py:71: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[],"afterStages":[],"labels":[{"name":"parentSuite","value":"DSMP"},{"name":"suite","value":"test_login"},{"name":"subSuite","value":"Test_Case_login"},{"name":"host","value":"DESKTOP-CUF9UFI"},{"name":"thread","value":"6704-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"DSMP.test_login"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"32315d81514857ed","status":"passed","time":{"start":1673861575098,"stop":1673861575616,"duration":518}}],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"78e4515705af9598.json","parameterValues":[]}