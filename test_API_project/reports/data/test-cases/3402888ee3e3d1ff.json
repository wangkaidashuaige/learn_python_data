{"uid":"3402888ee3e3d1ff","name":"test_login_成功登录01","fullName":"DSMP.test_login.Test_Case_login#test_login_成功登录01","historyId":"fc48856a0a7abe515a64a91f155fd758","time":{"start":1673862389894,"stop":1673862390147,"duration":253},"status":"failed","statusMessage":"AssertionError: assert 'user' in {'data': None, 'message': '验证码不能为空', 'status': 400, 'timestamp': '2023-01-16 17:46:30'}\n +  where {'data': None, 'message': '验证码不能为空', 'status': 400, 'timestamp': '2023-01-16 17:46:30'} = <bound method Response.json of <Response [400]>>()\n +    where <bound method Response.json of <Response [400]>> = <Response [400]>.json","statusTrace":"self = <test_login.Test_Case_login object at 0x000001E0359D2E10>\n\n    def test_login_成功登录01(self):\n        # 首页通过正则，获取uuid,img\n        code = requests.get('http://101.227.34.238:31943/dsp/system/auth/code')\n        res = code.content.decode()\n        print('返回结果：',res)\n        uuid = re.findall(r'\"uuid\":\"(.*?)\"', res, re.S)[0]\n        img = re.findall(r'\"img\":\"data:image\\/png;base64,(.*?)\"', res, re.S)\n        print(\"返回Uuid：\",uuid)\n        print(\"返回img：\",img)\n        # 通过base64把img中base64数据转换成图片，重复写入文件中。\n        bt = base64.b64decode(img[0])\n        png = open(\"dsmp_code1.png\", \"wb+\")\n        png.write(bt)\n        png.close()\n    \n        url = 'http://101.227.34.238:31943/dsp/system/auth/user/login'\n        headers = {\"Content-Type\": \"application/json\"}\n        # 调用第三方接口计算验证码\n        r = TestFunc()\n        data = json.dumps({\n            \"username\": \"ceshi1\",\n            \"password\": \"FuwBfYee2Z2MRqWshKrF9hi+lcrrXlnR0PLMhsymKkMPhCY100sZjrmcBr+Pe3ZQNd0TYY5aiwtPzFPhFKBaUA==\",\n            \"code\": r,\n            \"uuid\": uuid,\n            \"loginType\": \"generalUser\"\n        })\n        rep = requests.request('post',url=url, data=data, headers=headers)\n        print(rep.json())\n        ass = 'user'\n>       assert ass in rep.json()\nE       AssertionError: assert 'user' in {'data': None, 'message': '验证码不能为空', 'status': 400, 'timestamp': '2023-01-16 17:46:30'}\nE        +  where {'data': None, 'message': '验证码不能为空', 'status': 400, 'timestamp': '2023-01-16 17:46:30'} = <bound method Response.json of <Response [400]>>()\nE        +    where <bound method Response.json of <Response [400]>> = <Response [400]>.json\n\nDSMP\\test_login.py:40: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"afterStages":[],"labels":[{"name":"parentSuite","value":"DSMP"},{"name":"suite","value":"test_login"},{"name":"subSuite","value":"Test_Case_login"},{"name":"host","value":"DESKTOP-CUF9UFI"},{"name":"thread","value":"6704-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"DSMP.test_login"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":true,"retry":true,"extra":{"categories":[],"tags":[]},"source":"3402888ee3e3d1ff.json","parameterValues":[]}